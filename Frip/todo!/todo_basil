================================= dz's netmail =================================
   From: Basil Dolmatov                      2:5020/140      22 Dec 95  16:17:14
     To: Dmitry Zavalishin                   2:5020/32       22 Dec 95  17:23:21
   Subj: frip startup                                                           
================================================================================
Hello Dmitry!

21 Dec 95 13:00, Dmitry Zavalishin wrote to Basil Dolmatov:

DZ> Вась - я обдумываю дату включения фрип-сети под нагрузку - из тех, кто его
DZ> тестировал, никто не написал, что этого делать нельзя или это делать рано,
DZ> отсюда вывод, что можно и своевременно. Я знаю, что баги еще есть, но они
DZ> не фатального характера - то есть могут вызвать только некоторую
DZ> неоптимальность роутинга (надеюсь;) - как правило, в пределах нескольких
DZ> хопов. Что думаешь?

Если помнишь результаты разговора в подвале:
1) Hужен wilcard.cfg со списком "доверенных" линков, которые могут роутить на 
всю сеть.
2) Hужен какой-то способ получения информации о состоянии системы роутинга _вне_ 
основных путей ее распространения:
 а) запрет анонсов "не себя", пропуск всех rip'ов и приравнивание анонсирования 
к появлению в path.
 б) введение принципиально неубиваемых запросов о состоянии роутинга на 
конкретном узле.
3) Hужен просмотрщик/построитель карты роутинга по mapdir. (может кинуть клич в 
RU.FRIP?)

До выполнения всего этого - думаю нехорошо... ;-)

Cheers, Basil                                   (The Edifying Cat)
P.S. Путь 2а кажется мне _очень_ вкусным. Если это несложно реализовать, то
лучше идти по этому пути.
--- Nothing special
 * Origin: Edifying Cat Point Station (2:5020/140)

Hello Dmitry!

23 Feb 96 00:38, Dmitry Zavalishin wrote to Basil Dolmatov:

DZ>>> Этого я не предусматривал. А зачем? Сделать недолго, но хочется
DZ>>> убедиться, что это не даст параноидальных ростков :).

BD>> Хм... Ситуация-то обратная... У меня сейчас половина построенного
BD>> роутинга выглядит как 2:5021/5 2:5020/что-то... И именно по -NA
BD>> анонсам построенная... :-(

DZ> А почему :-(? Hормальные 7% активности и 93% пох.изма. :(. :)

Да мне не проценты мерять нужно, а роутинг строить... ;-)
И хочется чтобы в ситуации с "93% пох.изма" все равно можно было бы извлечь
какую-нибудь пользу.

BD>> Хотя бы в route.cfg к строчкам добавлять
BD>> комментарий типа: "; -NA ad 2:5021/5", а то забодаешься по базе
BD>> лазать, чтобы выяснить откуда этот путь вылез... :-(
DZ> А если данный тип роутера не понимает коммента через ";"...

Гы... Ключик в конфиг ввести. По умолчанию выключенный. Чтобы если кому надо
это (мне, например), так можно было бы включить и самому ломать голову как 
подружить "это" с роутером.

BD>>>> Как ему объявить какие-то ветки как approved? Торможу что-то... :-(
DZ>>> .ap файлы - там написано.

BD>> Ммм... Или торможу, или у меня их не оказалось... Поскольку сейчас он
BD>> у меня "сборный", то может куда и пропали...

DZ> -+--+--+--+--+--+---
DZ> $Id: Ap-files.txt 1.1 1996/01/24 22:13:15 dz Exp $

DZ> Файлы с расширением .ap в рабочем каталоге FRIP могуть содержать
DZ> "списки доверия" - пары вида "узел объява", которые сообщают
DZ> фрипу, что данный "узел", с вашей точки зрения, имеет право объявлять
DZ> роутинг на адрес "объява". Принцип действия механизма таков:
DZ> если фрип полагает, что узел не имеет права объявлять то, что написано
DZ> в рипе, рип получает "отрицательный флаг" -NA. (Кстати, рип может приехать
DZ> с таким флагом, если предыдущие фрипы в цепочке отнеслись к нему
DZ> с подозрением.) При сравнении рипов с базой рипы, у которых есть
DZ> отрицательные флаги, всегда считаются более плохими, чем рипы, у
DZ> коих этих флагов нет. Таким образом, если объявление идет от настоящего
DZ> владельца адреса и от "подложного" объявителя, то настоящее будет всегда
DZ> побеждать при сравнении.
DZ> -+--+--+--+--+--+---

Да я про другое... Это перекликается с (см. выше) желанием строить роутинг по
approved путям. Сейчас ценность того, что фрип выдает в файл route.cfg равна 
нулю. Мне для того, чтобы выдрать из него достоверную информацию нужно провести 
очень большую ручную работу, ergo, я этого делать не буду. :-(
Чтобы все-таки использовать собираемую фрипом информацию (сейчас, а не в 
неосуществимом будущем, когда он будет стоять в правильно настроенном виде у 
всех нужно иметь возможность автоматически выфильтровывать 100% достоверную 
информацию из базы. Сейчас такой возможности нет... :-(((

BD>> И он пошел...
BD>> Разобрал все рипы минут за пять, написал Creating routing и замолк...
BD>> Загрузка машины - 100% (DX2/66), время работы - 1 час (далее у меня
BD>> терпение лопнуло). Делаю ^C, оно говорит "cannot zip file, send
BD>> rip"... Делаю еще раз... Говорит то же самое... Еще раз... Еще раз...
BD>> Перегрузился я... В out 4000 рипов, все приаттачены в хлошки в
BD>> оутбоунде... Тут я начал понимать, что произошло на /251... :-(

DZ> Я надеюсь, что все проще. Похоже, zip при очень длинной командной строке
DZ> шизеет. Я такие загибы тоже видел - при этом ps показывает, что висит
DZ> zip.exe, жрущий весь процессор.

Вполне может быть. Лекарство хочу!
Btw, откуда взялась "очень длинная строка"? При попытке впихнуть в один архив
одной строкой три сотни рипов? Хм...
Исправь, а? Дополнительный код - да, но необходимый, иначе эта штука не будет 
работать в реальных условиях. Понятно, что делать add по одному - будет еще 
больший кошмар, нужно собирать блоками по десятку-два рипов и вызывать zip один 
раз на блок.

Кстати, возможно имеет смысл при обломе архиватора не рассовывать рипы по 
хлошкам непакованными, а просто прибивать их. Попытка "спасения" рипов таким 
образом будет приводить к "цунами" и укладке линков вокруг "икнувшего" узла.

Btw, несмотря на твою нелюбовь к идее "анонса через path", напомню о ней еще 
раз. Уже сейчас при _очень_ малом количестве фрипующих узлов средний объем 
приходящих пакованных рипов 20-30 кБ. А что будет при увеличении их числа? 8-(
"Rip Storms"?

[Лирическое отступление ON]
Мне это начинает напоминать "бухгалтерии на Клиппере", которые нормально 
работают с сотней-другой записей, но начинают давиться, когда количество записей 
переваливает через пару тысяч. :-(
[Лирическое отступление OFF]

IMHO стоит еще раз обдумать идеологию, и, возможно, поменять ее пока не поздно.
А то придется тащить за собой пороки "для совместимости" (ну как в случае с 
MS-DOS ;-).
А?

Если есть желание, то изложи подробно все неуютности, которые ты видишь при 
"анонсе через path", а то я видел только твои слова о том, что они есть, а вот 
подробного рассказа о них не попадалось.

Cheers, Basil                                   (The Edifying Cat)
--- Nothing special
 * Origin: Edifying Cat Point Station (2:5020/140.1)

