Hi,

Replying to a message of Basil Dolmatov to Dmitry Zavalishin:

 BD>>> Кстати, возможно имеет смысл при обломе архиватора не рассовывать
 BD>>> рипы по хлошкам непакованными, а просто прибивать их. Попытка
 BD>>> "спасения" рипов таким образом будет приводить к "цунами" и укладке
 BD>>> линков вокруг "икнувшего" узла.

 DZ>> Hу, укладки не происходит, наблюдал, но возможно, это имеет смысл.

 BD> Oops!! Откуда же они там у меня взялись???
 BD> Я прибил в /out тысячу рипов, после этого у меня пила минуты три
 BD> вычищала из хлошек ссылки на отсутствующие файлы. При мне это было,
 BD> других галлюцинаций у меня в это время не наблюдалось... ;-)))

А я не прибивал - прочпокивались, правда, они минут по 10 на линк. Тут вот надо 
сделать, кстати, фильтр на межгород, чтобы только звезды пускал, пожалуй. 

 DZ>> Скорее, нужно их пытаться пристегнуть в следующий заход...
 BD> Возможно.

 BD> Гм... Дим, похоже ты каким-то образом соединяешь противоречивые оценки
 BD> двух сторон одного и того же явления... ;-) Так не бывает... Смотри: 
 BD> 1) С одной стороны, говорится о том, что идеология фрипа будет хорошо
 BD> работать тогда, когда фрип будет стоять _на_большинстве_ узлов. И чем
 BD> больше будет "фрипующих узлов", тем лучше она будет работать.  2) С
 BD> другой стороны, говорится о том, что в будущем "слегка возрастет
 BD> трафик рипов" (как я понимаю по сравнению с нынешним состоянием). Hо
 BD> сейчас фрип стоит едва ли на _паре_процентов_ узлов!!

Все так. Однако объявы идут за половину сети. 405 узлов и 80 сетей объявлены, 
соответствующий трафик рипов уже присутствует.

 BD> Предполагая, что трафик будет расти линейно по N, где N - число узлов
 BD> (даже не учитывая наличие коэффициента M - что-то типа среднего числа
 BD> линков на узел), получится, что при постановке фрипа хотя бы на
 BD> четверти узлов трафик возрастет _на_порядок_. Так что, утверждения 1)
 BD> и 2) несовместны.

Соответственно, в разы, вместо порядка. Даже не пропорцимонально числу узлов в 
регионе. Ввиду "скручивания" сетей в агрегаты в Москве, скажем, будет бродить 
100% Московских объяв + 10-50% внешних. (грубо, конечно), что, вприкидку, даст 
около 1000-1200, т.е. примерно втрое против нынешнего, если вдруг все поголовно 
проснутся.

 BD>>> Если есть желание, то изложи подробно все неуютности, которые ты
 BD>>> видишь при "анонсе через path", а то я видел только твои слова о
 BD>>> том, что они есть, а вот подробного рассказа о них не попадалось.

 DZ>> Вася - это проблема надумана и не стоит того, чтобы с ней бороться.

 BD> Дим, не стоит отметать "взгляд со стороны". Hе всегда ты, как автор
 BD> идеи, сможешь быть объективен во всех оценках ее.

Я и не отметаю, я честно думал над этим с тех самых пор.

 DZ>> При
 DZ>> анонсе через path, например, пролетают флаги,

 BD> Какие? -NA? А он не нужен будет, поскольку в path можно будет вставить
 BD> только _свой_ адрес и проблема "анонса за того парня" испарится.

Он не единственный.

 DZ>> а если нет, то их придется совать чорти куда,
 BD> В строку path.

Да. Точнее, туда нужно будет встроить почти весь рип. Их будет меньше, но толще. 
В чем экономия? Hе, отвлекись от деталей, сформулируй - что и насколько ты 
хочешь этим съекономить? Мало того, ты осознаешь факт, что рост трафика в 
настоящий момент регулируется частотой анонсов, а в случае анонсов через path он 
будет зависеть хрен знает от чего и будет неуправляем?

 BD> Hе кипятись... Понятно, "ради чего". См. ниже.

 DZ>> Hу сейчас проходит в день 40Кбайт
 DZ>> рипов. Hу через год их будет 80 Кбайт, ну через два года - аж 160. Hу
 DZ>> ладно, 320. Оно тебе надо?

 BD> Да. Поясняю:

 BD> 1) Оценка объема неверна. См. выше.

Верна. См. выше. :)

 BD> 2) У меня суточный траффик через узел ~3M. Даже приняв твою оценку
 BD> роста траффика (заниженную в несколько раз как по объему, так и по
 BD> времени), то дополнительная нагрузка на узел у меня составит 10% (на
 BD> самом деле в несколько раз больше и существенно быстрее, чем через
 BD> два года). 

Вместе с трафиком рипов у тебя будет рости и обычный, так что и 10% не будет. :)

 BD> 3) Какие бы ни были платформы и структуры файловых систем существует
 BD> такое понятие, как "размер кластера". Уже сейчас (в состоянии
 BD> "легкого тестирования на относительно малом числе узлов") средний
 BD> .riz состоит примерно из _полусотни_ рипов. То есть, объем диска,
 BD> необходимый только для распаковки этих рипов сейчас составляет 200К
 BD> (при кластере 4К), 400К (при кластере 8К - Novell), 100К (при
 BD> кластере 2К - FreeBSD). 

Потому большинство серьезных узлов и пользуется HPFS с сектором 512 байт. :) 
Впрочем, конечно, было бы здорово жрать рипы прямо из .riz. Правда, это 
привносит еще одну проблему...

 BD> Плюс место для генерации рипов, порождаемых
 BD> из них и уходящих на линков: множим на 10 - коэффициент для
 BD> некрупного узла, у того же Экслера коэффициент более полусотни (это
 BD> некрупный хаб). Далее представляем себе, что узлы офрипились-таки
 BD> хотя бы не в большинстве своем, а в половине случаев, получаем еще
 BD> множитель порядка 25 от нынешнего состояния. Сравниваем с объемом
 BD> транзитного нетмейла... :-((((

Ок, ты убедил меня в том, что нужно научиться группировать рипы на ходу. :)

 DZ>> Честное слово, во фрипе есть чем заняться поважнее, я уверен.

 BD> Дим, у тебя стандартная позиция "автора". Я ее хорошо знаю (сам грешен
 BD> этим ;-), когда интересно заниматься реализацией красивой идеи и
 BD> совершенно неинтересно заниматься доводкой (а уж тем более
 BD> переделкой) программы, чтобы она обрабатывала самые маловероятные
 BD> особые ситуации, устойчиво жила в неожиданном окружении (как
 BD> хардовом, так и софтверном), оптимально использовала ресурсы (а не
 BD> по-Майкрософтовски: "Медленно работает наш продукт? Докупите еще 16МБ
 BD> памяти - будет работать быстрее").

Hет, у меня нестандартная позиция автора. Я занимаюсь доводкой фрипа уже скоро 
третий год. Оригинальная идея не пертерпела с тех пор ни единого изменения.


dz


---
 * Origin: Silent Infinity Surrounds Your Mind (2:5020/32)

